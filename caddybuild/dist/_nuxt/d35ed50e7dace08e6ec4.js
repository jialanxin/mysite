(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{301:function(o,e,v){"use strict";v.r(e);var t={data:function(){return{title:"Docker-compose部署静态页面",lastUpdate:"2019-12-03"}}},_=v(53),d=v(74),l=v.n(d),c=v(297),r=v(307),n=v(298),component=Object(_.a)(t,(function(){var o=this,e=o.$createElement,v=o._self._c||e;return v("v-container",[v("v-row",[v("v-col",[v("h1",[o._v(o._s(o.title))])])],1),o._v(" "),v("v-row",[v("v-col",[v("p",{staticClass:"font-weight-light"},[o._v("latest update: "+o._s(o.lastUpdate))])])],1),o._v(" "),v("v-row",[v("v-col",[v("p",[o._v("之前这个个人页面是部署在S3上的，后来发现手上还闲置了一台VPS，觉得有带宽不用很浪费，就把文件都移过来了。出乎意料的是美国的VPS访问速度似乎比东京的S3还快那么一点点。")]),o._v(" "),v("p",[o._v("整个过程并不复杂，文件服务器使用的是golang编写的Caddy2，Caddy2还处在实验开发阶段，利用Caddyfile文件可以很简单的配置好服务。")]),o._v(" "),v("p",[o._v("因为想以后和其他服务做集成，所以就给项目拿docker打了个包，写Dockerfile还是不复杂的。启动部署方面，之前是直接用"),v("kbd",[o._v("docker build")]),o._v("生成镜像，再"),v("kbd",[o._v("docker run")]),o._v("启动容器的，站点文件和配置文件挂载在容器外面。后来决定使用docker-compose，因为考虑到以后要和其他服务做集成，所以现在就是先把部署文件写好推到GitHub上然后在VPS上拖下来，然后"),v("kbd",[o._v("docker-compose up")]),o._v("一站式编排部署了。")]),o._v(" "),v("p",[o._v("（之前这里忘记写一点，VPS上先用"),v("kbd",[o._v("docker-compose down")]),o._v("停掉之前的服务，"),v("kbd",[o._v("git pull")]),o._v("拖新的下来之后，要"),v("kbd",[o._v("docker-compose build")]),o._v("重新编译一次镜像，最后以前的镜像也是要手动清理的）")]),o._v(" "),v("p",[o._v("CDN用的是Cloudflare免费的，之前S3部署只用CDN，所以DNS设置的是CNAME形式，现在还要使用Cloudflare的DNS了，所以就回归A形式了。")]),o._v(" "),v("p",[o._v("目前还没有做好的事情包括，HTTPS还没有配置好和能不能用Github Actions来自动完成部署呢？")]),o._v(" "),v("p",[o._v("还在慢慢学习中，以后有新的变化会更新的。")])])],1)],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VCol:c.a,VContainer:r.a,VRow:n.a})}}]);